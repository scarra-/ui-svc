<form name="msgForm"
      ng-controller="MsgController as msgCtrl"
      ng-submit="msgCtrl.submit();"
      novalidate>

    <div>
        <textarea name="message"
                  id="msg_textarea"
        		  ng-model="msgCtrl.msg.message"
                  class="form-control custom-control"
                  rows="3"
                  ng-maxlength=140
                  required >
        </textarea>
        <div class="error-container" ng-show="msgForm.message.$dirty && msgForm.message.$invalid">

            <div class="error-container" ng-show="msgForm.message.$dirty && msgForm.message.$invalid">
                <small class="error" ng-show="msgForm.message.$error.maxlength">
                    Your message cannot be longer than 140 characters<br/>
                </small>
            </div>
        </div>

          <button
            type="button"
            id="addImg_button"
            class="btn btn-default"
            ng-model="msgCtrl.img.image"
            ng-file-change="msgCtrl.fileDropped($files)"
            ng-file-select>Add image</button>
        <button
            id="sendMsg_button"
            class="btn btn-default"
            type="submit"
            ng-disabled="msgForm.$invalid || msgCtrl.disabled"
            >{{ msgCtrl.buttonText }}</button>
        <div id="inputLength" ng-hide="msgCtrl.msg.message.length == null">
                {{ 140 - msgCtrl.msg.message.length }} characters left.
        </div>



        <div ng-file-drop
             ng-model="msgCtrl.img.image"
             drag-over-class="dragover"
             ng-multiple="false"
             allow-dir="false"
             accept=".jpg,.png,.jpeg"
             class="filedroparea"
             ng-file-change="msgCtrl.fileDropped($files)">
             <h1>Drop your files here...</h1>
        </div>

        <div ng-hide="msgCtrl.hideImageName">
            <img class="image-preview" />
            <div class="progress" ng-hide="msgCtrl.hideinput">
               <div class="progress-bar" role="progressbar"
                  aria-valuemin="0" aria-valuemax="100" style="width: {{msgCtrl.showProgress()}}%;">
                  <span class="sr-only">40% Complete</span>
               </div>
            </div>
        </div>


    </div>
</form>
